webpackJsonp([5],{pYIE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("teIl"),r=a("TVmP"),s=a("PvTS"),i=a("x2ix"),o={data:function(){return{userInfo:this.$store.state.user,id:"",project:{},tableData:[],allEigenvalues:[],currentPage:1,pageSize:10,totalCnt:0}},components:{headTop:n.a,footerBottom:r.default,topNav:s.default,projectList:i.a},watch:{$route:function(e,t){this.id=this.$route.query.id,this.id?this.getItem():this.project={}}},created:function(){this.id=this.$route.query.id,this.id?this.getItem():this.$router.push({path:"/projects"})},methods:{editSuccess:function(e){this.getItem()},getItem:function(e){var t=this,a=(e=GSHP_SERVER_ENDPOINT+"/project/projectAllParams",{id:this.$route.query.id});t.$http.get(e,{params:a}).then(function(e){200===e.status&&t.successCallback(e.data)}).catch(function(e){})},successCallback:function(e){var t={id:(e=e).id,name:e.project_name,location:e.position,area:e.area,type:e.type,beginTime:e.begin_time,paramvalues:e.table};this.project=t,this.totalCnt=e.table.length,this.handleCurrentChange(1)},renderTuiHeader:function(e,t){t.column,t.$index;return e("span",{class:""},["用户侧供水温度(从机组到用户)t",e("sub",{attrs:{type:"text"}},["u,i"]),"/℃"])},renderTuoHeader:function(e,t){t.column,t.$index;return e("span",{class:""},["用户侧回水温度(从用户到机组)t",e("sub",{attrs:{type:"text"}},["u,o"]),"/℃"])},renderTgiHeader:function(e,t){t.column,t.$index;return e("span",{class:""},["地源侧供水温差(从机组到地埋管)t",e("sub",{attrs:{type:"text"}},["g,i"]),"/℃"])},renderTgoHeader:function(e,t){t.column,t.$index;return e("span",{class:""},["地源侧回水温度(从地埋管到机组)t",e("sub",{attrs:{type:"text"}},["g,o"]),"/℃"])},renderGuHeader:function(e,t){t.column,t.$index;return e("span",{class:""},["用户侧流量",e("span",{class:"block"},["G",e("sub",{attrs:{type:"text"}},["u"]),"/(m",e("sup",{attrs:{type:"text"}},["3"]),"*","h",e("sup",{attrs:{type:"text"}},["-1"]),")"])])},renderGgHeader:function(e,t){t.column,t.$index;return e("span",{class:""},["地源侧流量",e("span",{class:"block"},["G",e("sub",{attrs:{type:"text"}},["g"]),"/(m",e("sup",{attrs:{type:"text"}},["3"]),"*","h",e("sup",{attrs:{type:"text"}},["-1"]),")"])])},renderP1Header:function(e,t){t.column,t.$index;return e("span",{class:""},["机组总耗电P",e("sub",{attrs:{type:"text"}},["1"]),"/kW"])},renderPuHeader:function(e,t){t.column,t.$index;return e("span",{class:""},["用户侧水泵总耗电P",e("sub",{attrs:{type:"text"}},["u"]),"/kW"])},renderPgHeader:function(e,t){t.column,t.$index;return e("span",{class:""},["地源侧水泵总耗电P",e("sub",{attrs:{type:"text"}},["g"]),"/kW"])},renderP2Header:function(e,t){t.column,t.$index;return e("span",{class:""},["水泵总耗电P",e("sub",{attrs:{type:"text"}},["2"]),"/kW"])},handleSizeChange:function(e){this.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.currentPage=e,this.tableData=this.project.paramvalues.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)},editClick:function(){this.$refs.projectlist.projectAdd(!0)},deleteClick:function(){var e=this,t=this;this.$confirm("此操作将永久删除该项目以及该项目的所有信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=GSHP_SERVER_ENDPOINT+"/projects?id="+t.$route.query.id;t.$http.delete(e).then(function(e){console.log(e),200===e.status&&(t.$message({type:"success",message:'删除项目"'+t.project.name+'"成功!'}),t.$router.push({path:"/projects"}))}).catch(function(e){t.$message({type:"error",message:"删除失败!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},seasonDeleteClick:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该项目的"+(e?"供暖季":"供冷季")+"数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=GSHP_SERVER_ENDPOINT+"/projects/deleteSeasonData?id="+a.$route.query.id+"&isHot="+e;a.$http.delete(t).then(function(t){console.log(t),200===t.status&&(a.$message({type:"success",message:'删除"'+a.project.name+'"的'+(e?"供暖季":"供冷季")+"数据成功!"}),a.getItem())}).catch(function(e){a.$message({type:"error",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},filterTag:function(e,t){return t.hot===e}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"view-project"}},[a("head-top"),e._v(" "),a("top-nav"),e._v(" "),a("div",{staticClass:"main-container"},[a("project-list",{ref:"projectlist",on:{editSuccess:e.editSuccess}}),e._v(" "),a("div",{staticClass:"nav-right view row-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.id,expression:"id"}],staticClass:"page-title"},[e._v('\n                查看"'+e._s(e.project.name)+'"\n                '),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[a("el-button",{staticClass:"margin-left",attrs:{disabled:"admin"!==e.userInfo.username.toLowerCase(),type:"text",icon:"el-icon-edit"},on:{click:e.editClick}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[a("el-button",{staticClass:"margin-left",attrs:{disabled:"admin"!==e.userInfo.username.toLowerCase(),type:"text",icon:"el-icon-delete"},on:{click:e.deleteClick}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除供暖季",placement:"top-start"}},[a("el-button",{staticClass:"margin-left hot-delete",attrs:{disabled:"admin"!==e.userInfo.username.toLowerCase(),type:"text",icon:"el-icon-delete"},on:{click:function(t){e.seasonDeleteClick(!0)}}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除供冷季",placement:"top-start"}},[a("el-button",{staticClass:"margin-left cold-delete",attrs:{disabled:"admin"!==e.userInfo.username.toLowerCase(),type:"text",icon:"el-icon-delete"},on:{click:function(t){e.seasonDeleteClick(!1)}}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.id,expression:"id"}],staticClass:"margin-top"},[a("el-row",[a("el-col",{attrs:{span:2}},[e._v("项目地点:")]),e._v(" "),a("el-col",{attrs:{span:5}},[e._v(e._s(e.project.location?e.project.location:" "))]),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("建筑面积:")]),e._v(" "),a("el-col",{attrs:{span:3}},[e._v("\n                        "+e._s(e.project.area?e.project.area:" ")+"\n                        "),e.project.area?a("span",[e._v("m"),a("sup",[e._v("2")])]):e._e()]),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("建筑类型:")]),e._v(" "),a("el-col",{attrs:{span:3}},[e._v(e._s(e.project.type?e.project.type:" "))]),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("投用时间:")]),e._v(" "),a("el-col",{attrs:{span:4}},[e._v(e._s(e._f("dateFormatterFilter")(e.project.beginTime)))])],1),e._v(" "),e._m(0),e._v(" "),a("el-table",{attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"hot",label:"冷暖季节","min-width":"98px",fixed:"",filters:[{text:"供暖季",value:!0},{text:"供冷季",value:!1}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.time))]),e._v(" "),a("el-tag",{staticStyle:{padding:"0 4px"},attrs:{type:t.row.hot?"primary":"success","close-transition":""}},[e._v(e._s(t.row.hot?"供暖季":"供冷季")+"\n                            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tui","render-header":e.renderTuiHeader,"min-width":"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tuo","min-width":"125px","render-header":e.renderTuoHeader,label:"用户侧回水温度tuo"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tgi","min-width":"132px","render-header":e.renderTgiHeader,label:"地源侧供水温差tgi"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tgo","min-width":"135px","render-header":e.renderTgoHeader,label:"地源侧回水温度tgo"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gu","min-width":"89px","render-header":e.renderGuHeader,label:"用户侧流量Gu"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gg","min-width":"90px","render-header":e.renderGgHeader,label:"地源侧流量Gg"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pl","min-width":"80px","render-header":e.renderP1Header,label:"机组总耗电P1"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pu","min-width":"116px","render-header":e.renderPuHeader,label:"用户侧水泵总耗电Pu"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pg","min-width":"116px","render-header":e.renderPgHeader,label:"地源侧水泵总耗电Pg"}}),e._v(" "),a("el-table-column",{attrs:{prop:"p","min-width":"80px",label:"系统总耗电P/kW"}}),e._v(" "),a("el-table-column",{attrs:{prop:"p2","min-width":"80px","render-header":e.renderP2Header}})],1),e._v(" "),0!=e.totalCnt?a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[2,5,10,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCnt},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"margin-bottom margin-top-big"},[t("span",{staticClass:"ieds-dot"}),this._v("参数表")])}]};var c=a("VU/8")(o,l,!1,function(e){a("slG3")},null,null);t.default=c.exports},slG3:function(e,t){}});
//# sourceMappingURL=5.c665d04cc47187528566.js.map